{"version":3,"sources":["../../src/pages/login-page/login-page.module.ts","webpack:///./src/validators/email.ts?fb79","../../src/pages/login-page/login-page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACP;AAazC,IAAa,eAAe;IAA5B;IAA8B,CAAC;IAAD,sBAAC;AAAD,CAAC;AAAlB,eAAe;IAX3B,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,8DAAS;SACV;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,8DAAS,CAAC;SACpC;QACD,OAAO,EAAE;YACP,8DAAS;SACV;KACF,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;ACb5B;AAAA;IAAA;IAYA,CAAC;IAVQ,sBAAO,GAAd,UAAe,OAAoB;QACjC,IAAM,EAAE,GAAG,kCAAkC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAElE,UAAU;QACV,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACL,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAED,MAAM,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC;IAClC,CAAC;IACH,qBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdoE;AAC3B;AAC4D;AAClC;AACZ;AACsD;AAGrE;AACO;AAEjB;AAQ/B,IAAa,SAAS;IASpB,mBACS,OAAsB,EACtB,eAAgC,EAChC,GAAwB,EACxB,WAA8B,EAC9B,SAA0B,EAC1B,WAAwB,EACvB,OAAgB,EACjB,SAA0B;QAP1B,YAAO,GAAP,OAAO,CAAe;QACtB,oBAAe,GAAf,eAAe,CAAiB;QAChC,QAAG,GAAH,GAAG,CAAqB;QACxB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,cAAS,GAAT,SAAS,CAAiB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACvB,YAAO,GAAP,OAAO,CAAS;QACjB,cAAS,GAAT,SAAS,CAAiB;QACjC,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC;YACjC,KAAK,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,OAAO,CAAC,CAAC,kEAAU,CAAC,QAAQ,EAAE,yEAAc,CAAC,OAAO,CAAC,CAAC,CAAC;YAC9E,QAAQ,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,OAAO,CAAC,CAAC,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,kEAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;SACnF,CAAC,CAAC;IACL,CAAC;IAED,6BAAS,GAAT;QAAA,iBAmEC;QAlEC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;YACzC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,IAAI,iBAAe,CAAC;YAEpB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC;iBACtF,IAAI,CAAC,kBAAQ;gBACZ,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACtD,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;gBAC3D,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAC9D,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAE7C,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAC,CAAC;qBAC/D,SAAS,CAAC,mBAAS;oBAChB,SAAS,CAAC,OAAO,CAAC,kBAAQ;wBACxB,YAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;wBACnD,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,KAAK,SAAS,CAAC,EAAC;4BAC9B,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;wBAChD,CAAC;oBACH,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC;gBAEF,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAC,CAAC;qBAClD,SAAS,CAAC,mBAAS;oBAClB,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;oBACjB,SAAS,CAAC,OAAO,CAAC,kBAAQ;wBACtB,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;oBACvC,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7C,CAAC,CAAC;gBAEF,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,gBAAgB,EAAE,IAAI,EAAC,CAAC;qBACjD,SAAS,CAAC,mBAAS;oBAClB,KAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;oBACjB,SAAS,CAAC,OAAO,CAAC,kBAAQ;wBACtB,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;oBACvC,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAC/C,CAAC,CAAC;gBAEF,EAAE,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,EAAC;oBACvC,YAAY,CAAC,OAAO,CAAC,KAAK,EAAC,IAAI,CAAC,CAAC;gBACnC,CAAC;gBAAA,CAAC;gBAEF,KAAI,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC;gBAEjC,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,iBAAe,CAAC,CAAC;gBACpD,CAAC,CAAC,CAAC;YACL,CAAC,EAAE,eAAK;gBACN,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;oBAC1B,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;wBAChC,KAAK,EAAE,OAAO;wBACd,OAAO,EAAE,KAAK,CAAC,OAAO;wBACtB,OAAO,EAAE;4BACP;gCACE,IAAI,EAAE,IAAI;gCACV,IAAI,EAAE,QAAQ;6BACf;yBACF;qBACF,CAAC,CAAC;oBACH,KAAK,CAAC,OAAO,EAAE,CAAC;gBAClB,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IACH,CAAC;IAED,8BAAU,GAAV;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACpC,CAAC;IAED,iCAAa,GAAb;QAAA,iBA6BC;QA5BC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC,KAAK,EAAE,gBAAgB;YACvB,OAAO,EAAE,wBAAwB;YACjC,MAAM,EAAE;gBACN;oBACE,IAAI,EAAE,OAAO;oBACb,WAAW,EAAE,UAAU;iBACxB;aACF;YACD,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE,cAAI;wBACX,KAAI,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,cAAI;4BACtD,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;4BAC7B,KAAI,CAAC,cAAc,CAAC,SAAS,EAAE,4CAA4C,CAAC,CAAC;wBAC/E,CAAC,CAAC;6BACC,KAAK,CAAC,aAAG;4BACR,KAAI,CAAC,cAAc,CAAC,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;wBAC5C,CAAC,CAAC;oBACN,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,kCAAc,GAAd,UAAe,KAAK,EAAE,IAAI;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAChC,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,qCAAiB,GAAjB;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAChD,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,6BAAS,GAAT;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAC/C,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,wBAAI,GAAJ;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAEH,gBAAC;AAAD,CAAC;AAvJY,SAAS;IALrB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;OACG;KAC/B,CAAC;6FAW+B;QACL,kFAAe;QAC3B,yEAAmB;QACX,uEAAiB;QACnB,oEAAe;QACb,gEAAW;QACd,sEAAO;QACN,MAAe;AAsIpC;SAvJY,SAAS,oB","file":"2.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login-page';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-page/login-page.module.ts","import { FormControl } from '@angular/forms';\n\nexport class EmailValidator {\n\n  static isValid(control: FormControl){\n    const re = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/.test(control.value);\n\n    // success\n    if (re) { \n        return null; \n    } \n\n    return { \"invalidEmail\": true };\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import { FirebaseService } from './../../providers/firebase-service';\nimport { Component } from '@angular/core';\nimport { IonicPage, Loading, LoadingController, NavController, AlertController } from 'ionic-angular';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { EmailValidator } from '../../validators/email';\nimport { AngularFireDatabase, FirebaseObjectObservable, FirebaseListObservable } from 'angularfire2/database';\nimport { Observable } from 'rxjs/Observable';\nimport * as firebase from 'firebase/app';\nimport { Storage } from '@ionic/storage';\nimport { ModalController } from 'ionic-angular';\nimport { ModalPage } from './modal-page';\nimport 'rxjs/add/operator/map';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-login-page',\n  templateUrl: 'login-page.html',\n})\nexport class LoginPage {\n  public loginForm: FormGroup;\n  loading: Loading;\n  userData: any;\n  currUserFriends: any;\n  myPlaces: any;\n  uid: any;\n  allUsers: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public firebaseService: FirebaseService,\n    public afd: AngularFireDatabase,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public formBuilder: FormBuilder,\n    private storage: Storage,\n    public modalCtrl: ModalController) {\n    this.loginForm = formBuilder.group({\n      email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n      password: ['', Validators.compose([Validators.minLength(6), Validators.required])]\n    });\n  }\n\n  loginUser(): void {\n    if (this.loginForm.valid) {\n      this.loading = this.loadingCtrl.create();\n      this.loading.present();\n\n      let currUserFriends;\n\n      this.firebaseService.loginUser(this.loginForm.value.email, this.loginForm.value.password)\n        .then(authData => {\n          localStorage.setItem('currUserEmail', authData.email);\n          localStorage.setItem('currUserName', authData.displayName);\n          localStorage.setItem('emailVerified', authData.emailVerified);\n          localStorage.setItem('userID', authData.uid);\n\n          this.afd.list('/users/'+authData.uid, { preserveSnapshot: true})\n          .subscribe(snapshots=>{\n              snapshots.forEach(snapshot => {\n                localStorage.setItem(snapshot.key, snapshot.val());\n                if (snapshot.key === 'friends'){\n                  this.storage.set('myFriends', snapshot.val());\n                }\n              });\n          })\n\n          this.afd.list('/courts', { preserveSnapshot: true})\n          .subscribe(snapshots=>{\n            this.myPlaces = [];\n              snapshots.forEach(snapshot => {\n                  this.myPlaces.push(snapshot.val());\n              });\n              this.storage.set('courts',this.myPlaces);\n          })\n\n          this.afd.list('/users', { preserveSnapshot: true})\n          .subscribe(snapshots=>{\n            this.userData = [];\n              snapshots.forEach(snapshot => {\n                  this.userData.push(snapshot.val());\n              });\n              this.storage.set('allUsers',this.userData);\n          })\n\n          if (localStorage.getItem('img') == null){\n            localStorage.setItem('img',null);\n          };\n\n          this.firebaseService.getCourts();\n          \n          this.loading.dismiss().then(() => {\n            this.navCtrl.setRoot('TabsPage', currUserFriends);\n          });\n        }, error => {\n          this.loading.dismiss().then(() => {\n            let alert = this.alertCtrl.create({\n              title: 'Error',\n              message: error.message,\n              buttons: [\n                {\n                  text: \"Ok\",\n                  role: 'cancel'\n                }\n              ]\n            });\n            alert.present();\n          });\n        });\n    }\n  }\n\n  goToSignup() {\n    this.navCtrl.push('RegisterPage');\n  }\n\n  resetPassword() {\n    let prompt = this.alertCtrl.create({\n      title: 'Reset Password',\n      message: 'Enter your email below',\n      inputs: [\n        {\n          name: 'email',\n          placeholder: 'My Email'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n        },\n        {\n          text: 'Reset',\n          handler: data => {\n            this.firebaseService.resetPassword(data.email).then(data => {\n              console.log('reset: ', data);\n              this.showBasicAlert('Success', 'Check your email for further instructions.');\n            })\n              .catch(err => {\n                this.showBasicAlert('Error', err.message);\n              })\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  showBasicAlert(title, text) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      subTitle: text,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n  showPrivacyPolicy() {\n    let modal = this.modalCtrl.create('PolicyPage');\n    modal.present();\n  }\n\n  showTerms() {\n    let modal = this.modalCtrl.create('TermsPage');\n    modal.present();\n  }\n\n  back(){\n    this.navCtrl.pop();\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-page/login-page.ts"],"sourceRoot":""}